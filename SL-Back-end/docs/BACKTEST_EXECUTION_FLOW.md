# ë°±í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ê³¼ì • ìƒì„¸ ê°€ì´ë“œ

## ğŸ“‹ ëª©ì°¨
1. [ë°±í…ŒìŠ¤íŠ¸ ìš”ì²­ë¶€í„° ì™„ë£Œê¹Œì§€ ì „ì²´ í”Œë¡œìš°](#1-ì „ì²´-í”Œë¡œìš°)
2. [ê° ë‹¨ê³„ë³„ ìƒì„¸ ì„¤ëª…](#2-ê°-ë‹¨ê³„ë³„-ìƒì„¸-ì„¤ëª…)
3. [ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸” Write ê³¼ì •](#3-ë°ì´í„°ë² ì´ìŠ¤-í…Œì´ë¸”-write-ê³¼ì •)
4. [ë©”ëª¨ë¦¬ vs DB ì €ì¥](#4-ë©”ëª¨ë¦¬-vs-db-ì €ì¥)
5. [ì—ëŸ¬ ì²˜ë¦¬ ë° ìƒíƒœ ê´€ë¦¬](#5-ì—ëŸ¬-ì²˜ë¦¬-ë°-ìƒíƒœ-ê´€ë¦¬)

---

## 1. ì „ì²´ í”Œë¡œìš°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ì‚¬ìš©ì ìš”ì²­                                â”‚
â”‚  POST /api/v1/backtest/genport                              â”‚
â”‚  {                                                          â”‚
â”‚    buy_conditions: [...],                                   â”‚
â”‚    sell_conditions: [...],                                  â”‚
â”‚    start_date: "2023-01-01",                               â”‚
â”‚    end_date: "2024-01-01",                                 â”‚
â”‚    initial_capital: 100000000,                             â”‚
â”‚    commission_rate: 0.00015,                               â”‚
â”‚    slippage: 0.001                                         â”‚
â”‚  }                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              1. ë°±í…ŒìŠ¤íŠ¸ ID ìƒì„±                              â”‚
â”‚  backtest_id = uuid4()                                      â”‚
â”‚  ì˜ˆ: "a3f5c2d8-9b4a-4e1c-8d7f-2a3b4c5d6e7f"               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         2. GenPortBacktestEngine ì´ˆê¸°í™”                      â”‚
â”‚  engine = GenPortBacktestEngine(db)                        â”‚
â”‚  - tax_rate ì„¤ì • (0.23% ê³ ì •)                              â”‚
â”‚  - commission_rate, slippageë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ìŒ              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         3. ë°ì´í„° ë¡œë”© (READ from DB)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 3-1. ì£¼ê°€ ë°ì´í„° ë¡œë“œ                                 â”‚  â”‚
â”‚  â”‚   - í…Œì´ë¸”: stock_prices + companies                â”‚  â”‚
â”‚  â”‚   - ê¸°ê°„: start_date - 365ì¼ ~ end_date             â”‚  â”‚
â”‚  â”‚   - ì»¬ëŸ¼: stock_code, date, OHLCV, market_cap ë“±   â”‚  â”‚
â”‚  â”‚   - ë°˜í™˜: pandas DataFrame (ë©”ëª¨ë¦¬ ì €ì¥)             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 3-2. ì¬ë¬´ ë°ì´í„° ë¡œë“œ                                 â”‚  â”‚
â”‚  â”‚   - í…Œì´ë¸”: financial_statements +                  â”‚  â”‚
â”‚  â”‚            income_statements + balance_sheets       â”‚  â”‚
â”‚  â”‚   - ê¸°ê°„: start_date - 180ì¼ ~ end_date             â”‚  â”‚
â”‚  â”‚   - ì»¬ëŸ¼: ë§¤ì¶œì•¡, ìˆœì´ìµ, ìë³¸ì´ê³„, ìì‚°ì´ê³„ ë“±       â”‚  â”‚
â”‚  â”‚   - ë°˜í™˜: pandas DataFrame (ë©”ëª¨ë¦¬ ì €ì¥)             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 3-3. ë²¤ì¹˜ë§ˆí¬ ë°ì´í„° ìƒì„±                             â”‚  â”‚
â”‚  â”‚   - í˜„ì¬: ë”ë¯¸ ë°ì´í„° ìƒì„± (ì¶”í›„ ì‹¤ì œ ì§€ìˆ˜ ì—°ë™)      â”‚  â”‚
â”‚  â”‚   - KOSPI/KOSDAQ ì¼ë³„ ê°€ê²© ë°ì´í„°                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         4. íŒ©í„° ê³„ì‚° (ë©”ëª¨ë¦¬ ì—°ì‚°)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ë‚ ì§œë³„ ë°˜ë³µ ê³„ì‚° (ê° ê±°ë˜ì¼ë§ˆë‹¤)                      â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚ For each trading_day in [start_date ~ end_date]:    â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚   â”‚ 4-1. ê°€ì¹˜ íŒ©í„°                              â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   - PER, PBR, EV/EBITDA, DIV_YIELD        â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   - ë°ì´í„°: price + financial              â”‚    â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚   â”‚ 4-2. ìˆ˜ìµì„± íŒ©í„°                            â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   - ROE, ROA                              â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   - ë°ì´í„°: financial                      â”‚    â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚   â”‚ 4-3. ì„±ì¥ì„± íŒ©í„°                            â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   - REVENUE_GROWTH, EARNINGS_GROWTH       â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   - ë°ì´í„°: financial (YoY ë¹„êµ)           â”‚    â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚   â”‚ 4-4. ëª¨ë©˜í…€ íŒ©í„°                            â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   - 1M, 3M, 6M, 12M ëª¨ë©˜í…€                â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   - ë°ì´í„°: price (ê³¼ê±° ê°€ê²© ë¹„êµ)          â”‚    â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚   â”‚ 4-5. ë³€ë™ì„± íŒ©í„°                            â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   - 60ì¼ ë³€ë™ì„± (ì—°í™˜ì‚°)                   â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   - ë°ì´í„°: price (ì¼ë³„ ìˆ˜ìµë¥ )            â”‚    â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚   â”‚ 4-6. ìœ ë™ì„± íŒ©í„°                            â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   - í‰ê·  ê±°ë˜ëŒ€ê¸ˆ, íšŒì „ìœ¨                  â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   - ë°ì´í„°: price (ê±°ë˜ëŸ‰, ìƒì¥ì£¼ì‹ìˆ˜)      â”‚    â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚ ë°˜í™˜: factor_df (ë©”ëª¨ë¦¬)                             â”‚  â”‚
â”‚  â”‚   - ê° ë‚ ì§œë³„ ëª¨ë“  ì¢…ëª©ì˜ íŒ©í„° ê°’                     â”‚  â”‚
â”‚  â”‚   - ì •ê·œí™” (Z-Score) ë° ìˆœìœ„ ê³„ì‚° í¬í•¨               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         5. í¬íŠ¸í´ë¦¬ì˜¤ ì‹œë®¬ë ˆì´ì…˜ (ë©”ëª¨ë¦¬ ì—°ì‚°)                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ì´ˆê¸° ì„¤ì •                                             â”‚  â”‚
â”‚  â”‚   - cash_balance = initial_capital (100,000,000ì›)  â”‚  â”‚
â”‚  â”‚   - holdings = {} (ë¹ˆ ë”•ì…”ë„ˆë¦¬)                      â”‚  â”‚
â”‚  â”‚   - trades = [] (ê±°ë˜ ë‚´ì—­ ë¦¬ìŠ¤íŠ¸)                   â”‚  â”‚
â”‚  â”‚   - daily_snapshots = [] (ì¼ë³„ ìŠ¤ëƒ…ìƒ·)               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ê±°ë˜ì¼ë³„ ë°˜ë³µ (ê° ê±°ë˜ì¼ë§ˆë‹¤)                         â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚ For each trading_day in trading_days:               â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚   â”‚ 5-1. ë¦¬ë°¸ëŸ°ì‹± ì²´í¬                          â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   - MONTHLY: ë§¤ì›” ì²« ê±°ë˜ì¼                â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   - WEEKLY: ë§¤ì£¼ ì›”ìš”ì¼                    â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   - DAILY: ë§¤ì¼                           â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   - QUARTERLY: ë¶„ê¸°ë³„ ì²« ê±°ë˜ì¼            â”‚    â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚   IF ë¦¬ë°¸ëŸ°ì‹± ë‚ ì§œ:                                  â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚   â”‚ 5-2. ë§¤ë„ ì‹¤í–‰                              â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   For each holding in holdings:            â”‚    â”‚  â”‚
â”‚  â”‚   â”‚     - ë§¤ë„ ì¡°ê±´ ì²´í¬:                       â”‚    â”‚  â”‚
â”‚  â”‚   â”‚       â€¢ ì†ì ˆ: -10% ì´í•˜                    â”‚    â”‚  â”‚
â”‚  â”‚   â”‚       â€¢ ìµì ˆ: +20% ì´ìƒ                    â”‚    â”‚  â”‚
â”‚  â”‚   â”‚       â€¢ ë³´ìœ ê¸°ê°„: 60ì¼ ì´ˆê³¼                â”‚    â”‚  â”‚
â”‚  â”‚   â”‚                                            â”‚    â”‚  â”‚
â”‚  â”‚   â”‚     IF ë§¤ë„ ì¡°ê±´ ì¶©ì¡±:                     â”‚    â”‚  â”‚
â”‚  â”‚   â”‚       1) ë§¤ë„ê°€ = í˜„ì¬ê°€                   â”‚    â”‚  â”‚
â”‚  â”‚   â”‚       2) ìˆ˜ìˆ˜ë£Œ = ë§¤ë„ê¸ˆì•¡ Ã— 0.015%        â”‚    â”‚  â”‚
â”‚  â”‚   â”‚       3) ê±°ë˜ì„¸ = ë§¤ë„ê¸ˆì•¡ Ã— 0.23%         â”‚    â”‚  â”‚
â”‚  â”‚   â”‚       4) ì‹¤í˜„ì†ìµ ê³„ì‚°                     â”‚    â”‚  â”‚
â”‚  â”‚   â”‚       5) trades ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€              â”‚    â”‚  â”‚
â”‚  â”‚   â”‚       6) cash_balance ì¦ê°€                â”‚    â”‚  â”‚
â”‚  â”‚   â”‚       7) holdingsì—ì„œ ì œê±°                 â”‚    â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚   â”‚ 5-3. ë§¤ìˆ˜ ì¢…ëª© ì„ ì •                         â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   1) ê±°ë˜ ê°€ëŠ¥ ì¢…ëª© í•„í„°ë§:                 â”‚    â”‚  â”‚
â”‚  â”‚   â”‚      - volume > 0                          â”‚    â”‚  â”‚
â”‚  â”‚   â”‚      - close_price > 0                     â”‚    â”‚  â”‚
â”‚  â”‚   â”‚      - ì´ë¯¸ ë³´ìœ  ì¤‘ì´ì§€ ì•Šì€ ì¢…ëª©           â”‚    â”‚  â”‚
â”‚  â”‚   â”‚                                            â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   2) íŒ©í„° ê¸°ë°˜ ìŠ¤ì½”ì–´ë§:                    â”‚    â”‚  â”‚
â”‚  â”‚   â”‚      For each buy_condition:               â”‚    â”‚  â”‚
â”‚  â”‚   â”‚        - PER < 15 â†’ score +1               â”‚    â”‚  â”‚
â”‚  â”‚   â”‚        - ROE > 10 â†’ score +1               â”‚    â”‚  â”‚
â”‚  â”‚   â”‚        - MOMENTUM_3M > 0 â†’ score +1        â”‚    â”‚  â”‚
â”‚  â”‚   â”‚                                            â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   3) ìƒìœ„ Nê°œ ì¢…ëª© ì„ íƒ (max_positions)     â”‚    â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚   â”‚ 5-4. í¬ì§€ì…˜ ì‚¬ì´ì§•                          â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   - EQUAL_WEIGHT (ë™ì¼ ê°€ì¤‘):              â”‚    â”‚  â”‚
â”‚  â”‚   â”‚     ê° ì¢…ëª© = cash Ã— 0.95 / num_positions  â”‚    â”‚  â”‚
â”‚  â”‚   â”‚                                            â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   - MARKET_CAP (ì‹œì´ ê°€ì¤‘):                â”‚    â”‚  â”‚
â”‚  â”‚   â”‚     ê° ì¢…ëª© ë¹„ì¤‘ = í•´ë‹¹ ì¢…ëª© ì‹œì´ / ì „ì²´   â”‚    â”‚  â”‚
â”‚  â”‚   â”‚                                            â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   - RISK_PARITY (ë¦¬ìŠ¤í¬ íŒ¨ë¦¬í‹°):           â”‚    â”‚  â”‚
â”‚  â”‚   â”‚     ë³€ë™ì„± ì—­ìˆ˜ ë¹„ë¡€ ë°°ë¶„                  â”‚    â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚   â”‚ 5-5. ë§¤ìˆ˜ ì‹¤í–‰                              â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   For each buy_candidate:                  â”‚    â”‚  â”‚
â”‚  â”‚   â”‚     1) ìŠ¬ë¦¬í”¼ì§€ ì ìš©:                       â”‚    â”‚  â”‚
â”‚  â”‚   â”‚        execution_price = close Ã— 1.001     â”‚    â”‚  â”‚
â”‚  â”‚   â”‚                                            â”‚    â”‚  â”‚
â”‚  â”‚   â”‚     2) ë§¤ìˆ˜ ìˆ˜ëŸ‰ ê³„ì‚°:                      â”‚    â”‚  â”‚
â”‚  â”‚   â”‚        quantity = allocation / exec_price  â”‚    â”‚  â”‚
â”‚  â”‚   â”‚                                            â”‚    â”‚  â”‚
â”‚  â”‚   â”‚     3) ìˆ˜ìˆ˜ë£Œ ê³„ì‚°:                         â”‚    â”‚  â”‚
â”‚  â”‚   â”‚        commission = amount Ã— 0.015%        â”‚    â”‚  â”‚
â”‚  â”‚   â”‚                                            â”‚    â”‚  â”‚
â”‚  â”‚   â”‚     4) ì”ê³  í™•ì¸:                           â”‚    â”‚  â”‚
â”‚  â”‚   â”‚        IF amount + commission > cash:      â”‚    â”‚  â”‚
â”‚  â”‚   â”‚          SKIP (ë§¤ìˆ˜ ë¶ˆê°€)                  â”‚    â”‚  â”‚
â”‚  â”‚   â”‚                                            â”‚    â”‚  â”‚
â”‚  â”‚   â”‚     5) trades ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€                 â”‚    â”‚  â”‚
â”‚  â”‚   â”‚     6) cash_balance ê°ì†Œ                   â”‚    â”‚  â”‚
â”‚  â”‚   â”‚     7) holdingsì— ì¶”ê°€                     â”‚    â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚   â”‚ 5-6. ì¼ë³„ ìŠ¤ëƒ…ìƒ· ì €ì¥                       â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   - portfolio_value = cash + ë³´ìœ ì£¼ì‹ê°€ì¹˜  â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   - cash_balance                           â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   - invested_amount                        â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   - holdings (ë³µì‚¬ë³¸)                      â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   - trade_count                            â”‚    â”‚  â”‚
â”‚  â”‚   â”‚                                            â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   â†’ daily_snapshots ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€          â”‚    â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚ ë°˜í™˜: portfolio_result (ë©”ëª¨ë¦¬)                      â”‚  â”‚
â”‚  â”‚   - trades: ì „ì²´ ê±°ë˜ ë‚´ì—­                           â”‚  â”‚
â”‚  â”‚   - daily_snapshots: ì¼ë³„ í¬íŠ¸í´ë¦¬ì˜¤ ìƒíƒœ             â”‚  â”‚
â”‚  â”‚   - final_holdings: ìµœì¢… ë³´ìœ  ì¢…ëª©                   â”‚  â”‚
â”‚  â”‚   - final_cash: ìµœì¢… í˜„ê¸ˆ ì”ê³                        â”‚  â”‚
â”‚  â”‚   - rebalance_dates: ë¦¬ë°¸ëŸ°ì‹± ì‹¤í–‰ ë‚ ì§œ               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         6. í†µê³„ ê³„ì‚° (ë©”ëª¨ë¦¬ ì—°ì‚°)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 6-1. ìˆ˜ìµë¥  ì§€í‘œ                                      â”‚  â”‚
â”‚  â”‚   - total_return: ì´ ìˆ˜ìµë¥  (%)                      â”‚  â”‚
â”‚  â”‚   - annualized_return: CAGR                         â”‚  â”‚
â”‚  â”‚     = (final_value / initial)^(1/years) - 1         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 6-2. ë¦¬ìŠ¤í¬ ì§€í‘œ                                      â”‚  â”‚
â”‚  â”‚   - max_drawdown (MDD):                             â”‚  â”‚
â”‚  â”‚     = max((portfolio_value - cummax) / cummax)      â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚   - volatility: ì¼ë³„ ìˆ˜ìµë¥  í‘œì¤€í¸ì°¨ Ã— âˆš252          â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚   - downside_volatility: ìŒìˆ˜ ìˆ˜ìµë¥ ë§Œì˜ í‘œì¤€í¸ì°¨     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 6-3. ë¦¬ìŠ¤í¬ ì¡°ì • ìˆ˜ìµë¥                                â”‚  â”‚
â”‚  â”‚   - sharpe_ratio:                                   â”‚  â”‚
â”‚  â”‚     = (annualized_return - rf) / volatility         â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚   - sortino_ratio:                                  â”‚  â”‚
â”‚  â”‚     = (annualized_return - rf) / downside_vol       â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚   - calmar_ratio:                                   â”‚  â”‚
â”‚  â”‚     = annualized_return / max_drawdown              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 6-4. ê±°ë˜ í†µê³„                                        â”‚  â”‚
â”‚  â”‚   - total_trades: ì´ ê±°ë˜ íšŸìˆ˜                       â”‚  â”‚
â”‚  â”‚   - winning_trades: ìˆ˜ìµ ê±°ë˜ ìˆ˜                     â”‚  â”‚
â”‚  â”‚   - losing_trades: ì†ì‹¤ ê±°ë˜ ìˆ˜                      â”‚  â”‚
â”‚  â”‚   - win_rate: ìŠ¹ë¥  (%)                              â”‚  â”‚
â”‚  â”‚   - avg_win: í‰ê·  ìˆ˜ìµ (%)                          â”‚  â”‚
â”‚  â”‚   - avg_loss: í‰ê·  ì†ì‹¤ (%)                         â”‚  â”‚
â”‚  â”‚   - profit_loss_ratio: ì†ìµë¹„                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         7. ê²°ê³¼ í¬ë§·íŒ… (ë©”ëª¨ë¦¬ ì—°ì‚°)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 7-1. ì¼ë³„ ì„±ê³¼ (DailyPerformance)                    â”‚  â”‚
â”‚  â”‚   For each daily_snapshot:                          â”‚  â”‚
â”‚  â”‚     - date, portfolio_value, cash_balance           â”‚  â”‚
â”‚  â”‚     - daily_return, cumulative_return               â”‚  â”‚
â”‚  â”‚     - drawdown, trade_count                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 7-2. ì›”ë³„ ì„±ê³¼ (MonthlyPerformance)                  â”‚  â”‚
â”‚  â”‚   Group by (year, month):                           â”‚  â”‚
â”‚  â”‚     - return_rate: ì›” ìˆ˜ìµë¥                          â”‚  â”‚
â”‚  â”‚     - win_rate: ì›” ìŠ¹ë¥                              â”‚  â”‚
â”‚  â”‚     - trade_count: ì›” ê±°ë˜ ìˆ˜                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 7-3. ì—°ë„ë³„ ì„±ê³¼ (YearlyPerformance)                 â”‚  â”‚
â”‚  â”‚   Group by year:                                    â”‚  â”‚
â”‚  â”‚     - return_rate: ì—° ìˆ˜ìµë¥                          â”‚  â”‚
â”‚  â”‚     - max_drawdown: ì—° ìµœëŒ€ë‚™í­                      â”‚  â”‚
â”‚  â”‚     - sharpe_ratio: ì—° ìƒ¤í”„ë¹„ìœ¨                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 7-4. ê±°ë˜ ë‚´ì—­ (TradeRecord)                         â”‚  â”‚
â”‚  â”‚   For each trade:                                   â”‚  â”‚
â”‚  â”‚     - trade_id, date, type (BUY/SELL)               â”‚  â”‚
â”‚  â”‚     - stock_code, quantity, price                   â”‚  â”‚
â”‚  â”‚     - commission, tax, profit, profit_rate          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 7-5. í˜„ì¬ ë³´ìœ  ì¢…ëª© (PortfolioHolding)               â”‚  â”‚
â”‚  â”‚   For each final_holding:                           â”‚  â”‚
â”‚  â”‚     DBì—ì„œ ìµœì‹  ê°€ê²© ì¡°íšŒ (READ)                     â”‚  â”‚
â”‚  â”‚     - current_price, profit, profit_rate ê³„ì‚°        â”‚  â”‚
â”‚  â”‚     - weight: í¬íŠ¸í´ë¦¬ì˜¤ ë¹„ì¤‘                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 7-6. ì°¨íŠ¸ ë°ì´í„° ìƒì„±                                 â”‚  â”‚
â”‚  â”‚   - dates: ë‚ ì§œ ë°°ì—´                                 â”‚  â”‚
â”‚  â”‚   - portfolio_values: í¬íŠ¸í´ë¦¬ì˜¤ ê°€ì¹˜ ë°°ì—´            â”‚  â”‚
â”‚  â”‚   - cumulative_returns: ëˆ„ì  ìˆ˜ìµë¥  ë°°ì—´             â”‚  â”‚
â”‚  â”‚   - drawdowns: ë‚™í­ ë°°ì—´                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  ë°˜í™˜: BacktestResultGenPort ê°ì²´ (ë©”ëª¨ë¦¬)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         8. ê²°ê³¼ ì €ì¥ (í˜„ì¬ ë¯¸êµ¬í˜„, ì¶”í›„ êµ¬í˜„ ì˜ˆì •)             â”‚
â”‚  âš ï¸ í˜„ì¬ëŠ” _save_result() ë©”ì„œë“œê°€ ë¹„ì–´ìˆìŒ                  â”‚
â”‚                                                             â”‚
â”‚  TODO: ë‹¤ìŒ í…Œì´ë¸”ë“¤ì— WRITE ì˜ˆì •                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 8-1. backtest_sessions í…Œì´ë¸”                        â”‚  â”‚
â”‚  â”‚   INSERT:                                            â”‚  â”‚
â”‚  â”‚     - backtest_id (UUID)                            â”‚  â”‚
â”‚  â”‚     - backtest_name                                 â”‚  â”‚
â”‚  â”‚     - status (COMPLETED/FAILED)                     â”‚  â”‚
â”‚  â”‚     - created_at, completed_at                      â”‚  â”‚
â”‚  â”‚     - settings (JSON): commission, slippage ë“±       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 8-2. backtest_conditions í…Œì´ë¸”                      â”‚  â”‚
â”‚  â”‚   INSERT (bulk):                                    â”‚  â”‚
â”‚  â”‚     For each buy_condition:                         â”‚  â”‚
â”‚  â”‚       - backtest_id, condition_type (BUY/SELL)      â”‚  â”‚
â”‚  â”‚       - factor, operator, value                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 8-3. backtest_statistics í…Œì´ë¸”                      â”‚  â”‚
â”‚  â”‚   INSERT:                                            â”‚  â”‚
â”‚  â”‚     - backtest_id                                   â”‚  â”‚
â”‚  â”‚     - total_return, annualized_return               â”‚  â”‚
â”‚  â”‚     - max_drawdown, volatility                      â”‚  â”‚
â”‚  â”‚     - sharpe_ratio, sortino_ratio, calmar_ratio     â”‚  â”‚
â”‚  â”‚     - total_trades, win_rate, profit_loss_ratio     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 8-4. backtest_daily_snapshots í…Œì´ë¸”                 â”‚  â”‚
â”‚  â”‚   INSERT (bulk, ~250 rows/year):                    â”‚  â”‚
â”‚  â”‚     For each daily_snapshot:                        â”‚  â”‚
â”‚  â”‚       - backtest_id, snapshot_date                  â”‚  â”‚
â”‚  â”‚       - portfolio_value, cash_balance               â”‚  â”‚
â”‚  â”‚       - daily_return, cumulative_return             â”‚  â”‚
â”‚  â”‚       - drawdown                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 8-5. backtest_trades í…Œì´ë¸”                          â”‚  â”‚
â”‚  â”‚   INSERT (bulk, ìˆ˜ë°±~ìˆ˜ì²œ rows):                     â”‚  â”‚
â”‚  â”‚     For each trade:                                 â”‚  â”‚
â”‚  â”‚       - backtest_id, trade_date, trade_type         â”‚  â”‚
â”‚  â”‚       - stock_code, quantity, price                 â”‚  â”‚
â”‚  â”‚       - commission, tax, profit, profit_rate        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 8-6. backtest_holdings í…Œì´ë¸”                        â”‚  â”‚
â”‚  â”‚   INSERT (bulk):                                    â”‚  â”‚
â”‚  â”‚     For each final_holding:                         â”‚  â”‚
â”‚  â”‚       - backtest_id, stock_code                     â”‚  â”‚
â”‚  â”‚       - quantity, avg_price, current_price          â”‚  â”‚
â”‚  â”‚       - profit, profit_rate, weight                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         9. ì‘ë‹µ ë°˜í™˜                                         â”‚
â”‚  HTTP 200 OK                                                â”‚
â”‚  Content-Type: application/json                             â”‚
â”‚                                                             â”‚
â”‚  {                                                          â”‚
â”‚    "backtest_id": "a3f5c2d8-...",                          â”‚
â”‚    "backtest_name": "genport_20250109_143022",             â”‚
â”‚    "status": "COMPLETED",                                  â”‚
â”‚    "statistics": {                                         â”‚
â”‚      "total_return": 15.23,                                â”‚
â”‚      "annualized_return": 14.87,                           â”‚
â”‚      "max_drawdown": -12.45,                               â”‚
â”‚      "sharpe_ratio": 1.42,                                 â”‚
â”‚      ...                                                   â”‚
â”‚    },                                                      â”‚
â”‚    "daily_performance": [...],                             â”‚
â”‚    "monthly_performance": [...],                           â”‚
â”‚    "trades": [...],                                        â”‚
â”‚    "current_holdings": [...],                              â”‚
â”‚    "chart_data": {...}                                     â”‚
â”‚  }                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. ê° ë‹¨ê³„ë³„ ìƒì„¸ ì„¤ëª…

### 2-1. ë°±í…ŒìŠ¤íŠ¸ ID ìƒì„±
```python
from uuid import uuid4

backtest_id = uuid4()
# ì˜ˆ: UUID('a3f5c2d8-9b4a-4e1c-8d7f-2a3b4c5d6e7f')
```

**íŠ¹ì§•:**
- UUID v4 (ëœë¤ ìƒì„±)
- ê¸€ë¡œë²Œí•˜ê²Œ ìœ ë‹ˆí¬
- 128ë¹„íŠ¸ = 16ë°”ì´íŠ¸
- ë¬¸ìì—´ í‘œí˜„: "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"

---

### 2-2. ë°ì´í„° ë¡œë”© ì„¸ë¶€ ê³¼ì •

#### A. ì£¼ê°€ ë°ì´í„° ë¡œë“œ (`_load_price_data`)
```sql
SELECT
    sp.company_id,
    c.stock_code,
    c.company_name AS stock_name,
    sp.trade_date AS date,
    sp.open_price,
    sp.high_price,
    sp.low_price,
    sp.close_price,
    sp.volume,
    sp.trading_value,
    sp.market_cap,
    sp.listed_shares
FROM stock_prices sp
JOIN companies c ON sp.company_id = c.company_id
WHERE
    sp.trade_date >= '2022-01-01'  -- start_date - 365ì¼
    AND sp.trade_date <= '2024-01-01'  -- end_date
    AND sp.close_price IS NOT NULL
    AND sp.volume > 0
ORDER BY sp.trade_date, c.stock_code
```

**ë°ì´í„° í¬ê¸° ì˜ˆìƒ:**
- ì¢…ëª© ìˆ˜: ~2,500ê°œ (KOSPI + KOSDAQ)
- ê¸°ê°„: 2ë…„ = ~500 ê±°ë˜ì¼
- ì´ rows: 2,500 Ã— 500 = 1,250,000 rows
- ë©”ëª¨ë¦¬: ~100-200 MB (pandas DataFrame)

---

#### B. ì¬ë¬´ ë°ì´í„° ë¡œë“œ (`_load_financial_data`)
```sql
-- ì†ìµê³„ì‚°ì„œ
SELECT
    fs.company_id,
    c.stock_code,
    fs.bsns_year AS fiscal_year,
    fs.reprt_code AS report_code,
    fs.report_date,
    is.account_nm,
    is.thstrm_amount AS current_amount
FROM financial_statements fs
JOIN income_statements is ON fs.stmt_id = is.stmt_id
JOIN companies c ON fs.company_id = c.company_id
WHERE
    fs.report_date >= '2023-07-01'  -- start_date - 180ì¼
    AND fs.report_date <= '2024-01-01'
    AND is.account_nm IN ('ë§¤ì¶œì•¡', 'ì˜ì—…ì´ìµ', 'ë‹¹ê¸°ìˆœì´ìµ', ...)
```

**ë°ì´í„° í¬ê¸° ì˜ˆìƒ:**
- ì¢…ëª© ìˆ˜: ~2,500ê°œ
- ë¶„ê¸°ë‹¹ ê³„ì •ê³¼ëª©: ~8ê°œ
- ê¸°ê°„: 6ê°œì›” = ~2ë¶„ê¸°
- ì´ rows: 2,500 Ã— 8 Ã— 2 = 40,000 rows
- ë©”ëª¨ë¦¬: ~5-10 MB

---

### 2-3. íŒ©í„° ê³„ì‚° ì˜ˆì‹œ

```python
# ë‚ ì§œ: 2023-05-15
# ì¢…ëª©: ì‚¼ì„±ì „ì (005930)

# 1. PER ê³„ì‚°
market_cap = 400_000_000_000_000  # 400ì¡°ì›
net_income = 30_000_000_000_000   # 30ì¡°ì› (TTM)
PER = market_cap / net_income = 13.33

# 2. ëª¨ë©˜í…€ ê³„ì‚°
current_price = 70_000ì›
price_3m_ago = 65_000ì›
MOMENTUM_3M = (70_000 / 65_000 - 1) Ã— 100 = 7.69%

# 3. ë³€ë™ì„± ê³„ì‚°
daily_returns = [-0.5%, 1.2%, -0.8%, 0.3%, ...]  # 60ì¼ì¹˜
volatility = std(daily_returns) Ã— âˆš252 = 18.5%
```

---

### 2-4. í¬íŠ¸í´ë¦¬ì˜¤ ì‹œë®¬ë ˆì´ì…˜ ì˜ˆì‹œ

```python
# 2023-05-01 (ë¦¬ë°¸ëŸ°ì‹± ë‚ ì§œ)
cash_balance = 100,000,000ì›
holdings = {}

# ë§¤ìˆ˜ ì¢…ëª© ì„ ì •
buy_candidates = ['005930', '000660', '035420', ...]  # 20ê°œ

# í¬ì§€ì…˜ ì‚¬ì´ì§• (EQUAL_WEIGHT)
per_stock = 100,000,000 Ã— 0.95 / 20 = 4,750,000ì›

# ë§¤ìˆ˜ ì‹¤í–‰
for stock in buy_candidates:
    current_price = get_price(stock, '2023-05-01')
    execution_price = current_price Ã— 1.001  # ìŠ¬ë¦¬í”¼ì§€
    quantity = 4,750,000 / execution_price
    commission = 4,750,000 Ã— 0.00015

    trades.append({
        'type': 'BUY',
        'stock': stock,
        'quantity': quantity,
        'price': execution_price,
        'amount': 4,750,000,
        'commission': commission
    })

    cash_balance -= (4,750,000 + commission)
    holdings[stock] = {'quantity': quantity, 'avg_price': execution_price}

# ê²°ê³¼
cash_balance = 5,000,000ì› (5%)
holdings = 20ê°œ ì¢…ëª© ë³´ìœ 
```

---

## 3. ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸” Write ê³¼ì •

### í˜„ì¬ ìƒíƒœ: âŒ ë¯¸êµ¬í˜„
```python
async def _save_result(self, backtest_id: UUID, result: BacktestResultGenPort):
    """ê²°ê³¼ ì €ì¥ (ì¶”í›„ êµ¬í˜„)"""
    # ì‹¤ì œ êµ¬í˜„ì‹œ ë°ì´í„°ë² ì´ìŠ¤ì— ê²°ê³¼ ì €ì¥
    logger.info(f"Saving backtest result for {backtest_id}")
    # ì—¬ê¸°ì— ì‹¤ì œ ì €ì¥ ë¡œì§ ì¶”ê°€
    pass  # í˜„ì¬ ë¹„ì–´ìˆìŒ
```

### êµ¬í˜„ ì˜ˆì • í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ

#### 3-1. backtest_sessions í…Œì´ë¸”
```sql
CREATE TABLE backtest_sessions (
    backtest_id UUID PRIMARY KEY,
    backtest_name VARCHAR(200) NOT NULL,
    user_id INTEGER,  -- ì¶”í›„ ì‚¬ìš©ì ì¸ì¦ ì‹œ
    status VARCHAR(20) NOT NULL,  -- PENDING/RUNNING/COMPLETED/FAILED
    created_at TIMESTAMP NOT NULL DEFAULT NOW(),
    started_at TIMESTAMP,
    completed_at TIMESTAMP,

    -- ì„¤ì • ì •ë³´ (JSON)
    settings JSONB,  -- {rebalance_frequency, max_positions, ...}

    -- ê¸°ê°„ ì •ë³´
    start_date DATE NOT NULL,
    end_date DATE NOT NULL,
    initial_capital DECIMAL(20,2) NOT NULL,

    -- ì—ëŸ¬ ì •ë³´
    error_message TEXT
);
```

**INSERT ì˜ˆì‹œ:**
```python
session = BacktestSession(
    backtest_id=backtest_id,
    backtest_name="genport_20250109_143022",
    status="COMPLETED",
    created_at=datetime.now(),
    completed_at=datetime.now(),
    settings={
        "rebalance_frequency": "MONTHLY",
        "max_positions": 20,
        "commission_rate": 0.00015,
        "slippage": 0.001
    },
    start_date=date(2023, 1, 1),
    end_date=date(2024, 1, 1),
    initial_capital=Decimal("100000000")
)
await db.add(session)
await db.commit()
```

---

#### 3-2. backtest_conditions í…Œì´ë¸”
```sql
CREATE TABLE backtest_conditions (
    condition_id BIGSERIAL PRIMARY KEY,
    backtest_id UUID NOT NULL REFERENCES backtest_sessions(backtest_id) ON DELETE CASCADE,
    condition_type VARCHAR(10) NOT NULL,  -- BUY/SELL
    factor VARCHAR(50) NOT NULL,
    operator VARCHAR(10) NOT NULL,
    value DECIMAL(10,4) NOT NULL,
    weight DECIMAL(5,2),
    description TEXT
);

CREATE INDEX idx_backtest_conditions_backtest ON backtest_conditions(backtest_id);
```

**INSERT ì˜ˆì‹œ:**
```python
# ë§¤ìˆ˜ ì¡°ê±´
conditions = [
    BacktestCondition(
        backtest_id=backtest_id,
        condition_type="BUY",
        factor="PER",
        operator="<",
        value=15.0
    ),
    BacktestCondition(
        backtest_id=backtest_id,
        condition_type="BUY",
        factor="ROE",
        operator=">",
        value=10.0
    ),
    # ... more conditions
]
await db.bulk_save_objects(conditions)
await db.commit()
```

---

#### 3-3. backtest_statistics í…Œì´ë¸”
```sql
CREATE TABLE backtest_statistics (
    stat_id BIGSERIAL PRIMARY KEY,
    backtest_id UUID NOT NULL UNIQUE REFERENCES backtest_sessions(backtest_id) ON DELETE CASCADE,

    -- ìˆ˜ìµë¥  ì§€í‘œ
    total_return DECIMAL(10,4),
    annualized_return DECIMAL(10,4),
    benchmark_return DECIMAL(10,4),
    excess_return DECIMAL(10,4),

    -- ë¦¬ìŠ¤í¬ ì§€í‘œ
    max_drawdown DECIMAL(10,4),
    volatility DECIMAL(10,4),
    downside_volatility DECIMAL(10,4),

    -- ë¦¬ìŠ¤í¬ ì¡°ì • ìˆ˜ìµë¥ 
    sharpe_ratio DECIMAL(10,4),
    sortino_ratio DECIMAL(10,4),
    calmar_ratio DECIMAL(10,4),

    -- ê±°ë˜ í†µê³„
    total_trades INTEGER,
    winning_trades INTEGER,
    losing_trades INTEGER,
    win_rate DECIMAL(5,2),
    avg_win DECIMAL(10,4),
    avg_loss DECIMAL(10,4),
    profit_loss_ratio DECIMAL(10,4),

    -- ìì‚° ì •ë³´
    initial_capital DECIMAL(20,2),
    final_capital DECIMAL(20,2),
    peak_capital DECIMAL(20,2),

    trading_days INTEGER
);
```

---

#### 3-4. backtest_daily_snapshots í…Œì´ë¸”
```sql
CREATE TABLE backtest_daily_snapshots (
    snapshot_id BIGSERIAL PRIMARY KEY,
    backtest_id UUID NOT NULL REFERENCES backtest_sessions(backtest_id) ON DELETE CASCADE,
    snapshot_date DATE NOT NULL,

    portfolio_value DECIMAL(20,2),
    cash_balance DECIMAL(20,2),
    invested_amount DECIMAL(20,2),

    daily_return DECIMAL(10,6),
    cumulative_return DECIMAL(10,6),
    drawdown DECIMAL(10,6),
    benchmark_return DECIMAL(10,6),

    trade_count INTEGER DEFAULT 0
);

CREATE INDEX idx_backtest_snapshots_backtest_date ON backtest_daily_snapshots(backtest_id, snapshot_date);
```

**ë°ì´í„° í¬ê¸°:**
- 1ë…„ ë°±í…ŒìŠ¤íŠ¸ = ~250 rows
- 5ë…„ ë°±í…ŒìŠ¤íŠ¸ = ~1,250 rows

---

#### 3-5. backtest_trades í…Œì´ë¸”
```sql
CREATE TABLE backtest_trades (
    trade_id BIGSERIAL PRIMARY KEY,
    backtest_id UUID NOT NULL REFERENCES backtest_sessions(backtest_id) ON DELETE CASCADE,

    trade_date DATE NOT NULL,
    trade_type VARCHAR(10) NOT NULL,  -- BUY/SELL
    stock_code VARCHAR(6) NOT NULL,
    stock_name VARCHAR(200),

    quantity INTEGER NOT NULL,
    price DECIMAL(15,2) NOT NULL,
    amount DECIMAL(20,2) NOT NULL,
    commission DECIMAL(15,2),
    tax DECIMAL(15,2),

    -- ë§¤ë„ ì‹œì—ë§Œ
    profit DECIMAL(15,2),
    profit_rate DECIMAL(10,4),
    hold_days INTEGER,

    selection_reason TEXT
);

CREATE INDEX idx_backtest_trades_backtest ON backtest_trades(backtest_id);
CREATE INDEX idx_backtest_trades_date ON backtest_trades(backtest_id, trade_date);
```

**ë°ì´í„° í¬ê¸°:**
- ì›”ë³„ ë¦¬ë°¸ëŸ°ì‹± Ã— 20ì¢…ëª© Ã— 2(ë§¤ìˆ˜+ë§¤ë„) = 40 trades/month
- 1ë…„ = ~480 trades
- 5ë…„ = ~2,400 trades

---

#### 3-6. backtest_holdings í…Œì´ë¸”
```sql
CREATE TABLE backtest_holdings (
    holding_id BIGSERIAL PRIMARY KEY,
    backtest_id UUID NOT NULL REFERENCES backtest_sessions(backtest_id) ON DELETE CASCADE,

    stock_code VARCHAR(6) NOT NULL,
    stock_name VARCHAR(200),

    quantity INTEGER NOT NULL,
    avg_price DECIMAL(15,2) NOT NULL,
    current_price DECIMAL(15,2),

    value DECIMAL(20,2),
    profit DECIMAL(15,2),
    profit_rate DECIMAL(10,4),
    weight DECIMAL(5,2),

    buy_date DATE,
    hold_days INTEGER
);

CREATE INDEX idx_backtest_holdings_backtest ON backtest_holdings(backtest_id);
```

---

## 4. ë©”ëª¨ë¦¬ vs DB ì €ì¥

### í˜„ì¬ êµ¬í˜„ (ë©”ëª¨ë¦¬ ê¸°ë°˜)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ë©”ëª¨ë¦¬ (RAM)                 â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ price_data (DataFrame)       â”‚  â”‚
â”‚  â”‚ ~200 MB                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ financial_data (DataFrame)   â”‚  â”‚
â”‚  â”‚ ~10 MB                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ factor_data (DataFrame)      â”‚  â”‚
â”‚  â”‚ ~50 MB                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ portfolio_result (Dict)      â”‚  â”‚
â”‚  â”‚ ~5 MB                        â”‚  â”‚
â”‚  â”‚  - trades: List[Dict]        â”‚  â”‚
â”‚  â”‚  - daily_snapshots: List     â”‚  â”‚
â”‚  â”‚  - holdings: Dict            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                     â”‚
â”‚  ì´ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰: ~300 MB           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì¥ì :**
- âœ… ë¹ ë¥¸ ê³„ì‚° ì†ë„
- âœ… ë³µì¡í•œ ì¿¼ë¦¬ ë¶ˆí•„ìš”
- âœ… pandas/polars ìµœì í™” í™œìš©

**ë‹¨ì :**
- âŒ ì¬ì‹œì‘ ì‹œ ë°ì´í„° ì†ì‹¤
- âŒ ëŒ€ìš©ëŸ‰ ë°±í…ŒìŠ¤íŠ¸ ì‹œ ë©”ëª¨ë¦¬ ë¶€ì¡± ê°€ëŠ¥
- âŒ ê²°ê³¼ ì˜êµ¬ ì €ì¥ ë¶ˆê°€

---

### êµ¬í˜„ ì˜ˆì • (í•˜ì´ë¸Œë¦¬ë“œ)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ë©”ëª¨ë¦¬ (RAM)                 â”‚
â”‚  - ê³„ì‚° ì¤‘ê°„ ê²°ê³¼                    â”‚
â”‚  - DataFrame ì—°ì‚°                    â”‚
â”‚  - ì„ì‹œ íŒ©í„° ë°ì´í„°                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“ (ì™„ë£Œ í›„)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    PostgreSQL (RDS)                 â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ backtest_sessions            â”‚  â”‚
â”‚  â”‚ - ë©”íƒ€ ì •ë³´, ìƒíƒœ             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ backtest_statistics          â”‚  â”‚
â”‚  â”‚ - ìˆ˜ìµë¥ , ë¦¬ìŠ¤í¬ ì§€í‘œ         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ backtest_daily_snapshots     â”‚  â”‚
â”‚  â”‚ - ì¼ë³„ í¬íŠ¸í´ë¦¬ì˜¤ ìƒíƒœ        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ backtest_trades              â”‚  â”‚
â”‚  â”‚ - ê±°ë˜ ë‚´ì—­                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì¥ì :**
- âœ… ê²°ê³¼ ì˜êµ¬ ì €ì¥
- âœ… ê³¼ê±° ë°±í…ŒìŠ¤íŠ¸ ë¹„êµ ê°€ëŠ¥
- âœ… ëŒ€ì‹œë³´ë“œ/ë¶„ì„ ë„êµ¬ ì—°ë™
- âœ… ê³„ì‚° ì¤‘ì—ëŠ” ë©”ëª¨ë¦¬ í™œìš© (ë¹ ë¦„)

---

## 5. ì—ëŸ¬ ì²˜ë¦¬ ë° ìƒíƒœ ê´€ë¦¬

### 5-1. ë°±í…ŒìŠ¤íŠ¸ ìƒíƒœ ì „ì´
```
PENDING â†’ RUNNING â†’ COMPLETED
                  â†˜ FAILED
```

### 5-2. ì—ëŸ¬ ì²˜ë¦¬ ì˜ˆì‹œ
```python
async def run_backtest(...):
    try:
        # 1. ìƒíƒœ: RUNNING
        await self._update_backtest_status(backtest_id, "RUNNING")

        # 2. ë°ì´í„° ë¡œë”©
        price_data = await self._load_price_data(...)
        if price_data.empty:
            raise ValueError("No price data found")

        # 3. íŒ©í„° ê³„ì‚°
        factor_data = await self._calculate_all_factors(...)

        # 4. ì‹œë®¬ë ˆì´ì…˜
        portfolio_result = await self._simulate_portfolio(...)

        # 5. ìƒíƒœ: COMPLETED
        await self._update_backtest_status(backtest_id, "COMPLETED")

        return result

    except Exception as e:
        # 6. ìƒíƒœ: FAILED
        await self._update_backtest_status(
            backtest_id,
            "FAILED",
            error_message=str(e)
        )
        logger.error(f"Backtest failed: {e}", exc_info=True)
        raise
```

---

## 6. ì„±ëŠ¥ ìµœì í™” ê³ ë ¤ì‚¬í•­

### 6-1. ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ìµœì í™”
```python
# âœ… ì¢‹ì€ ì˜ˆ: ì¸ë±ìŠ¤ í™œìš©
SELECT * FROM stock_prices
WHERE trade_date >= '2023-01-01'  -- idx_stock_prices_date_company í™œìš©
  AND company_id IN (...)

# âŒ ë‚˜ìœ ì˜ˆ: í’€ìŠ¤ìº”
SELECT * FROM stock_prices
WHERE YEAR(trade_date) = 2023  -- í•¨ìˆ˜ ì‚¬ìš©ìœ¼ë¡œ ì¸ë±ìŠ¤ ë¯¸í™œìš©
```

### 6-2. Bulk Insert
```python
# âœ… ì¢‹ì€ ì˜ˆ: Bulk insert (í•œ ë²ˆì— 1000ê°œ)
await db.bulk_save_objects(daily_snapshots)
await db.commit()

# âŒ ë‚˜ìœ ì˜ˆ: ê°œë³„ insert (250ë²ˆ ì»¤ë°‹)
for snapshot in daily_snapshots:
    await db.add(snapshot)
    await db.commit()  # ë„ˆë¬´ ëŠë¦¼
```

### 6-3. ë©”ëª¨ë¦¬ ê´€ë¦¬
```python
# ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ì‹œ ì²­í¬ ë‹¨ìœ„ ì²˜ë¦¬
CHUNK_SIZE = 10000

for chunk in pd.read_sql(query, engine, chunksize=CHUNK_SIZE):
    # ì²­í¬ë³„ ì²˜ë¦¬
    process_chunk(chunk)
```

---

## 7. ìš”ì•½

| í•­ëª© | í˜„ì¬ ìƒíƒœ | êµ¬í˜„ ì˜ˆì • |
|-----|----------|----------|
| **ë°±í…ŒìŠ¤íŠ¸ ID** | âœ… UUID ìƒì„± | - |
| **ë°ì´í„° ë¡œë”©** | âœ… DB READ (ë©”ëª¨ë¦¬) | - |
| **íŒ©í„° ê³„ì‚°** | âœ… ë©”ëª¨ë¦¬ ì—°ì‚° | - |
| **í¬íŠ¸í´ë¦¬ì˜¤ ì‹œë®¬ë ˆì´ì…˜** | âœ… ë©”ëª¨ë¦¬ ì—°ì‚° | - |
| **í†µê³„ ê³„ì‚°** | âœ… ë©”ëª¨ë¦¬ ì—°ì‚° | - |
| **ê²°ê³¼ í¬ë§·íŒ…** | âœ… Pydantic ëª¨ë¸ | - |
| **DB ì €ì¥** | âŒ ë¯¸êµ¬í˜„ (pass) | â³ êµ¬í˜„ ì˜ˆì • |
| **ìƒíƒœ ê´€ë¦¬** | âŒ ë¯¸êµ¬í˜„ | â³ êµ¬í˜„ ì˜ˆì • |
| **ì—ëŸ¬ í•¸ë“¤ë§** | âœ… Try-catch | â³ DB ë¡œê¹… ì¶”ê°€ |

---

## 8. ë‹¤ìŒ ë‹¨ê³„ (êµ¬í˜„ í•„ìš”)

1. **DB ì €ì¥ ë¡œì§ êµ¬í˜„**
   - `_save_result()` ë©”ì„œë“œ ì™„ì„±
   - Bulk insert ìµœì í™”

2. **ë°±í…ŒìŠ¤íŠ¸ ìƒíƒœ ê´€ë¦¬**
   - `backtest_sessions` í…Œì´ë¸”ì— ìƒíƒœ ê¸°ë¡
   - PENDING â†’ RUNNING â†’ COMPLETED/FAILED

3. **ë°±í…ŒìŠ¤íŠ¸ ëª©ë¡ ì¡°íšŒ API**
   - ê³¼ê±° ë°±í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì¡°íšŒ
   - í˜ì´ì§€ë„¤ì´ì…˜

4. **ë°±í…ŒìŠ¤íŠ¸ ì¬ì¡°íšŒ API**
   - `GET /api/v1/backtest/{backtest_id}`
   - DBì—ì„œ ê²°ê³¼ ë¶ˆëŸ¬ì˜¤ê¸°

5. **ë°±í…ŒìŠ¤íŠ¸ ë¹„êµ ê¸°ëŠ¥**
   - ì—¬ëŸ¬ ë°±í…ŒìŠ¤íŠ¸ ê²°ê³¼ ë¹„êµ
   - ì°¨íŠ¸ ì˜¤ë²„ë ˆì´
